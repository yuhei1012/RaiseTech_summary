---
# MySQLリポジトリの修正
- name: Remove existing MySQL repository
  ansible.builtin.yum_repository:
    name: mysql57-community
    state: absent
  become: yes

- name: Add correct MySQL repository for Amazon Linux 2
  ansible.builtin.yum_repository:
    name: mysql57-community
    description: MySQL 5.7 Community Server
    baseurl: http://repo.mysql.com/yum/mysql-5.7-community/el/7/x86_64/
    gpgcheck: yes
    enabled: yes
    gpgkey: http://repo.mysql.com/RPM-GPG-KEY-mysql
    state: present
  become: yes

# MySQLのインストール
- name: Install MySQL
  ansible.builtin.yum:
    name: mysql-community-server
    state: present
  become: yes







